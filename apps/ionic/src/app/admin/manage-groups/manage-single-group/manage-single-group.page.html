<nx12-header [logoutButton]='true' title='ADMIN_NAV.GROUPING_MANAGEMENT'></nx12-header>
<ion-content>
    <div *ngIf='!!item' class='p-fluid grid'>
        <div class='field col-12 md:col-4 mt-4 mb-4'>
        <span class='p-float-label'>
            <input [(ngModel)]='item.item' id='item' maxlength="80" pInputText type='text' />
            <label for='item'>{{ 'MANAGE_GROUPINGS.ITEM' | translate }}</label>
        </span>
        </div>
        <div class='field col-12 md:col-4 mt-4 mb-4'>
             <span class='p-float-label'>
                <input #newGroup (keydown.enter)='add(newGroup)' id='newGroup' pInputText type='text' maxlength="255" />
                <label for='newGroup'>{{ 'MANAGE_GROUPINGS.NEW_GROUP' | translate }}</label>
            </span>
            <span>
                <p-button (click)='add(newGroup)' [disabled]='!newGroup?.value?.length || !item?.groups?.includes(newGroup.value)' styleClass='p-button-success' icon='pi pi-{{ NG_ICON.plus }}' type='button'></p-button>
                <input #newGroup (keydown.enter)='add(newGroup)' id='newGroup' maxlength="255" pInputText type='text' />
                <label for='newGroup'>{{ 'MANAGE_GROUPINGS.NEW_GROUP' | translate }}</label>
            </span>
            <span>
                <p-button (click)='add(newGroup)' [disabled]='!newGroup?.value?.length || !item?.groups?.includes(newGroup.value)' icon='pi pi-{{ NG_ICON.plus }}' styleClass='p-button-success' type='button'></p-button>
            </span>
        </div>
        <div class='field col-12 md:col-4 mt-4 mb-4'>
            <p-table [value]='item.groups ?? []' id='groups' responsiveLayout="stack">
                <ng-template pTemplate='header'>
                    <tr>
                    </tr>
                </ng-template>
                <ng-template pTemplate='emptymessage'>
                    <tr>
                        <td>{{ 'MANAGE_GROUPINGS.NO_GROUPS' | translate }}</td>
                    </tr>
                </ng-template>
                <ng-template let-group pTemplate='body'>
                    <tr>
                        <td>
                            <div>
                                {{group}}
                            </div>
                            <div class='float-end'>
                                <p-button (click)='markCorrect(group)' *ngIf='item?.correct !== group' styleClass='p-button-success' icon='pi pi-{{ NG_ICON.check }}' type='button'></p-button>
                                <p-button *ngIf='item?.correct === group' [disabled]='true' styleClass='p-button-primary' label='{{ "MANAGE_GROUPINGS.CORRECT_BUTTON" | translate }}' type='button'></p-button>
                                <p-button (click)='remove(group)' styleClass='p-button-danger' icon='pi pi-{{ NG_ICON.trash }}' type='button'></p-button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <div class='field col-12 md:col-4 mt-4 mb-4'>
            <span>
                <p-button (click)='save()' [disabled]='!item?.item?.length || !item?.groups?.length || !item?.correct?.length' icon='pi pi-{{ NG_ICON.save }}' label='{{ "MANAGE_GROUPINGS.SAVE" | translate }}' styleClass='p-button-primary' type='button'></p-button>
            </span>
        </div>
    </div>
</ion-content>
