<nx12-header [logoutButton]='true' title='NAVIGATION.USER_DATA'></nx12-header>

<ion-content>
    <ion-card>
        <ion-card-content>
            <ion-list *ngIf='!!user'>
                <ion-item *ngFor="let prop of ['_id', 'username', 'email', 'om']">

                    <div class='inline-flex align-items-center'>
                        <span><b>{{ ('USER_EDIT.' + prop) | translate }}:</b> </span>
                    </div>

                    <div class='col-12 md:col-4'>
                        <input (input)='check(prop)' [(ngModel)]='user[prop]'
                               id='input-text-{{ prop }}' pInputText
                               type='text' maxlength="80" />
                    </div>

                    <div *ngIf='!!validationErrors[prop]' class='inline-flex mb-2 align-items-center'>
                        <div class='field col-12 md:col-4'>
                            <span class='text-danger'>{{ validationErrors[prop] }}</span>
                        </div>
                    </div>

                </ion-item>
                <p-button (click)="save(['_id', 'username', 'email', 'om'])" styleClass='p-button-success' icon='pi pi-check' type='button'></p-button>
            </ion-list>
        </ion-card-content>
    </ion-card>
</ion-content>

<p-dialog *ngIf='!!user' [(visible)]='passwordDialog' [closable]='false' header="{{ 'USER_EDIT.PASSWORD_DIALOG_TITLE' | translate }}">
    <p>{{ 'USER_EDIT.PASSWORD_DIALOG_CONTENT' | translate }}</p>
    <form>
        <input [(ngModel)]='user.password' name='password' pInputText type='password' maxlength="80" />
        <div>
            <span class='p-buttonset'>
                <p-button (click)='savePassword()' styleClass='p-button-success' icon='pi pi-check' label="{{ 'BUTTONS.SAVE' | translate}}" type='button'></p-button>
                <p-button (click)='cancel()' styleClass='p-button-danger' icon='pi pi-times' label="{{ 'BUTTONS.CANCEL' | translate }}" type='button'></p-button>
            </span>
        </div>
    </form>
</p-dialog>
