<div class='p-fluid grid p-3 pt-5'>
    <div class='field col-12 md:col-6'>
        <div class='mb-4'>
            <span class='p-float-label'>
                <input [(ngModel)]='question.question' [disabled]='template === "skill"' id='title' pInputText type='text'>
                <label for='title'>{{ 'MANAGE_QUESTIONS.QUESTION' | translate }}</label>
            </span>
        </div>
        <div class='mb-4'>
            <span class='p-float-label'>
                <p-dropdown [(ngModel)]='question.type' [autoDisplayFirst]='false'
                            [disabled]='template !== "custom" && template !== "quiz"'
                            [options]='questionTypes'
                            [placeholder]='(template !== "custom" && template !== "quiz"
                                    ? "MANAGE_QUESTIONS.TEMPLATE2." + template.toUpperCase()
                                    : "FORM_OPERATION.PLEASE_CHOOSE"
                                ) | translate'
                            id='type'>
                    <ng-template let-item pTemplate='item'>
                        <div>
                            {{ ('MANAGE_QUESTIONS.TYPES.' + item.toUpperCase()) | translate }}
                        </div>
                    </ng-template>

                </p-dropdown>
                <label for='type'>{{ 'MANAGE_QUESTIONS.TYPE' | translate }}</label>
            </span>
        </div>
        <div class='mb-4'>
                <span class='p-buttonset'>
                    <p-button (click)='save()' icon='pi pi-save' label='{{ "FORM_OPERATION.SAVE" | translate }}'
                              styleClass='p-button-primary'></p-button>
                    <p-button (click)='cancel()' icon='pi pi-times' label='{{ "FORM_OPERATION.CANCEL" | translate }}'
                              styleClass='p-button-primary'></p-button>
                </span>
        </div>
        <div *ngIf='question.type?.startsWith("choose") || template === "skill"' class='mb-4'>
            <p-table [value]='question.answers ?? []'>
                <ng-template pTemplate='header'>
                    <tr>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template let-ans pTemplate='body'>
                    <tr>
                        <td>
                            {{ ans.text }}
                            <p-dropdown (select)='log($event)' [(ngModel)]='ans.categoryIndex' [options]='options' optionLabel="name" optionValue="value" styleClass='w-100'></p-dropdown>
                        </td>
                        <td>
                            <span class='p-buttonset'>
                                <p-button (click)='markAsCorrect(ans)' *ngIf='template !== "skill" && !ans.isCorrect'
                                          label='{{ "MANAGE_QUESTIONS.NOT_SOLUTION" | translate }}'
                                          styleClass='p-button-primary'></p-button>
                                <p-button (click)='unMarkAsCorrect(ans)' *ngIf='template !== "skill" && ans.isCorrect'
                                          label='{{ "MANAGE_QUESTIONS.IS_SOLUTION" | translate }}'
                                          styleClass='p-button-primary'></p-button>
                                <p-button (click)='removeAnswer(ans)' icon='pi pi-trash'
                                          styleClass='p-button-primary'></p-button>
                            </span>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
            <div class='my-4'>
                <span class='p-float-label'>
                    <input #newAnswer (keydown.enter)='addAnswer(newAnswer)' id='newAnswer' pInputText type='text'>
                    <label for='newAnswer'>{{ 'MANAGE_QUESTIONS.NEW_ANSWER' | translate }}</label>
                </span>
                <p-button (click)='addAnswer(newAnswer)' icon='pi pi-plus' styleClass='p-button-primary' type='button'></p-button>
            </div>
        </div>
    </div>
</div>
